<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æœºé•¿è–ªèµ„ç»“ç®—å• 2025</title>
    <style>
        :root {
            --primary: #1e3a8a; --bg: #f1f5f9; --card: #ffffff;
            --text-main: #0f172a; --text-sub: #64748b;
            --border: #e2e8f0; --accent-red: #dc2626; --accent-green: #16a34a;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); color: var(--text-main); padding-bottom: 60px; }
        .container { max-width: 900px; margin: 0 auto; padding: 15px; display: flex; flex-direction: column; gap: 15px; }
        
        /* å¡ç‰‡ç»„ä»¶ */
        .card { background: var(--card); border-radius: 12px; padding: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); border: 1px solid var(--border); }
        .card-head { display: flex; justify-content: space-between; align-items: center; padding-bottom: 10px; border-bottom: 1px solid var(--border); margin-bottom: 10px; }
        .card-title { font-weight: 700; font-size: 1rem; color: var(--primary); }
        
        /* æœ€ç»ˆç»“ç®—å¤§å± */
        .result-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-top: 10px; }
        .res-box { background: #f8fafc; padding: 10px; border-radius: 8px; text-align: center; border: 1px solid var(--border); }
        .res-label { font-size: 0.7rem; color: var(--text-sub); margin-bottom: 4px; }
        .res-val { font-size: 1rem; font-weight: 800; font-family: monospace; }
        .res-total { grid-column: 1 / -1; background: #eff6ff; border-color: #bfdbfe; padding: 15px; }
        .total-money { font-size: 1.8rem; color: var(--accent-green); font-weight: 900; margin-top: 5px; }

        /* è–ªèµ„æ˜ç»†è¡¨ */
        .bill-table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        .bill-table th { text-align: left; color: var(--text-sub); font-size: 0.75rem; padding: 8px 4px; border-bottom: 2px solid var(--border); }
        .bill-table td { padding: 10px 4px; border-bottom: 1px dashed var(--border); vertical-align: top; }
        .row-item { font-weight: 600; width: 25%; }
        .row-calc { font-family: monospace; color: var(--text-sub); font-size: 0.8rem; width: 50%; }
        .row-money { text-align: right; font-weight: 700; font-family: monospace; width: 25%; }
        
        .tag-calc { background: #e0f2fe; color: #0369a1; padding: 1px 4px; border-radius: 3px; border: 1px solid #bae6fd; margin-right: 3px; }
        .tax-highlight { color: var(--accent-red); background: #fef2f2; padding: 2px 5px; border-radius: 4px; display: inline-block; font-weight: bold; }
        
        /* å½•å…¥ä¸è®¾ç½® */
        .input-group { margin-bottom: 12px; }
        .input-group label { display: block; font-size: 0.75rem; font-weight: 600; color: var(--text-sub); margin-bottom: 5px; }
        .input-ctrl { width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 8px; background: #fff; font-size: 0.95rem; }
        
        .btn { border: none; padding: 12px; border-radius: 8px; font-weight: 600; cursor: pointer; width: 100%; transition: 0.2s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-ghost { background: transparent; color: var(--text-sub); border: 1px solid var(--border); padding: 8px; font-size: 0.85rem; }
        
        .settings-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 100; display: none; justify-content: center; align-items: center; }
        .modal-body { background: white; width: 90%; max-width: 350px; padding: 20px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }

        .ai-area { width: 100%; height: 80px; padding: 10px; border: 2px dashed var(--border); border-radius: 8px; resize: none; background: #f8fafc; font-size: 0.9rem; }
        
        /* åˆ—è¡¨ */
        .log-item { background: white; padding: 12px; border-radius: 8px; border: 1px solid var(--border); margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; }
        .badge { font-size: 0.7rem; padding: 2px 5px; border-radius: 3px; margin-right: 5px; }
        .b-dom { background: #f1f5f9; color: #64748b; }
        .b-int { background: #f3e8ff; color: #7e22ce; }
    </style>
</head>
<body>

<div class="container">
    <!-- é¡¶éƒ¨ -->
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h1 style="font-size:1.2rem; color:var(--primary); font-weight:800;">ğŸ‘¨â€âœˆï¸ æœºé•¿è–ªèµ„ç»“ç®—å•</h1>
        <button class="btn-ghost" style="width:auto" onclick="document.getElementById('settings').style.display='flex'">âš™ï¸ ç¨åŠ¡åŸºæ•°</button>
    </div>

    <!-- 1. æœ€ç»ˆç»“ç®—å¤§å± -->
    <div class="card">
        <div class="card-head">
            <div class="card-title">ğŸ’° æœ¬æœˆå®å‘æ„æˆ (ç¨å)</div>
            <span id="tax_level_badge" style="font-size:0.75rem; background:#fee2e2; color:#b91c1c; padding:2px 6px; border-radius:4px; font-weight:bold;">å½“å‰ç¨ç‡ 0%</span>
        </div>
        
        <div class="result-grid">
            <div class="res-box res-total">
                <div class="res-label">æœ¬æœˆé“¶è¡Œå¡å®å‘æ€»é¢</div>
                <div class="total-money" id="disp_total_net">Â¥0.00</div>
            </div>
            <div class="res-box">
                <div class="res-label">å›ºå®šå·¥èµ„å®å‘</div>
                <div class="res-val" style="color:#0f172a">96,080</div>
            </div>
            <div class="res-box">
                <div class="res-label">å˜åŠ¨å®å‘(ç¨å)</div>
                <div class="res-val" style="color:#b91c1c" id="disp_var_net">0</div>
            </div>
            <div class="res-box">
                <div class="res-label">è¡¥åŠ©å®å‘(å…ç¨)</div>
                <div class="res-val" style="color:#16a34a" id="disp_allow_net">0</div>
            </div>
        </div>
    </div>

    <!-- 2. è–ªèµ„è®¡ç®—æ˜ç»† (è¿‡ç¨‹å±•ç¤º) -->
    <div class="card">
        <div class="card-head"><div class="card-title">ğŸ§¾ è®¡ç®—è¿‡ç¨‹æ˜ç»†</div></div>
        <table class="bill-table">
            <thead>
                <tr><th>é¡¹ç›®</th><th>è®¡ç®—å…¬å¼ / è¿‡ç¨‹</th><th>é‡‘é¢ (Â¥)</th></tr>
            </thead>
            <tbody id="bill_body">
                <!-- JS åŠ¨æ€ç”Ÿæˆ -->
            </tbody>
        </table>
    </div>

    <!-- 3. æ•°æ®å½•å…¥ -->
    <div class="card">
        <div class="card-head"><div class="card-title">ğŸ“ é£è¡Œ/åŠ ç­å½•å…¥</div></div>
        
        <div class="input-group">
            <textarea id="ai_input" class="ai-area" placeholder="æ™ºèƒ½è¯†åˆ«ç²˜è´´ï¼š&#10;11.15 æ²ˆé˜³-ä¸œäº¬ å›½é™…æœ‰è¿‡å¤œ æ»‘è¡Œ2å¤©&#10;10.1 å›½åº†åŠ ç­ 4å¤©"></textarea>
            <button class="btn btn-primary" style="margin-top:5px; padding:8px;" onclick="mockAIProcess()">âœ¨ AI è¯†åˆ« (æ¨¡æ‹Ÿ)</button>
        </div>

        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <div class="input-group">
                <label>æ—¥æœŸ</label>
                <input type="date" id="in_date" class="input-ctrl">
            </div>
            <div class="input-group">
                <label>ç±»å‹</label>
                <select id="in_type" class="input-ctrl">
                    <option value="dom">å›½å†…é£è¡Œ (0å…ƒ)</option>
                    <option value="int">å›½é™…/æ¸¯æ¾³å° (Â¥640)</option>
                    <option value="holiday">èŠ‚å‡æ—¥åŠ ç­ (3å€)</option>
                </select>
            </div>
        </div>
        
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <div class="input-group">
                <label>é£è¡Œå°æ—¶ / åŠ ç­å¤©æ•°</label>
                <input type="number" id="in_amount" class="input-ctrl" placeholder="å°æ—¶æˆ–å¤©æ•°">
            </div>
            <div class="input-group">
                <label>æ»‘è¡Œå¤©æ•° (Block Days)</label>
                <input type="number" id="in_block" class="input-ctrl" placeholder="å›½é™…x0.6 / å›½å†…0" value="0">
            </div>
        </div>

        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
             <div class="input-group">
                <label>é¤è¡¥ (Meal)</label>
                <select id="in_meal" class="input-ctrl">
                    <option value="0">æ— </option>
                    <option value="60">å›½å†…é¤ (60)</option>
                    <option value="180">å›½é™…é¤ (180)</option>
                </select>
            </div>
            <div class="input-group">
                <label>é©»å¤–è¡¥åŠ© (Layover)</label>
                <select id="in_layover" class="input-ctrl">
                    <option value="0">æ— </option>
                    <option value="200">å›½å†…æ— è¿‡å¤œ(200)</option>
                    <option value="500">å›½å†…æœ‰è¿‡å¤œ(500)</option>
                    <option value="400">å›½é™…æ— è¿‡å¤œ(400)</option>
                    <option value="900">å›½é™…æœ‰è¿‡å¤œ(900)</option>
                </select>
            </div>
        </div>
        
        <button class="btn btn-primary" onclick="addRecord()">æ·»åŠ è®°å½•</button>
    </div>

    <!-- 4. è®°å½•åˆ—è¡¨ -->
    <div id="log_list"></div>
</div>

<!-- è®¾ç½®å¼¹çª— -->
<div id="settings" class="settings-modal">
    <div class="modal-body">
        <h3 style="margin-bottom:15px; color:var(--primary)">âš™ï¸ ç¨åŠ¡åŸºæ•°è®¾ç½®</h3>
        <p style="font-size:0.8rem; color:var(--text-sub); margin-bottom:15px;">ä¸ºäº†è®¡ç®—è¡¥ç¨ï¼Œè¯·è¾“å…¥ä¸ªç¨APPä¸­<b>æˆªè‡³ä¸Šä¸ªæœˆ</b>çš„æ•°æ®ï¼š</p>
        
        <div class="input-group">
            <label>å¹´åˆè‡³ä»Šç´¯è®¡åº”çº³ç¨æ‰€å¾—é¢</label>
            <input type="number" id="set_cum_income" class="input-ctrl" value="942692">
        </div>
        <div class="input-group">
            <label>å¹´åˆè‡³ä»Šå·²ç¼´ç¨é¢</label>
            <input type="number" id="set_cum_tax" class="input-ctrl" value="244022">
        </div>
        <div class="input-group">
            <label>ä¸“é¡¹é™„åŠ æ‰£é™¤ (æ¯æœˆ)</label>
            <input type="number" id="set_deduction" class="input-ctrl" value="0" placeholder="å¡«äº†èƒ½çœç¨">
        </div>
        
        <div style="display:flex; gap:10px; margin-top:20px;">
            <button class="btn btn-ghost" onclick="document.getElementById('settings').style.display='none'">å–æ¶ˆ</button>
            <button class="btn btn-primary" onclick="saveSettings()">ä¿å­˜å¹¶è®¡ç®—</button>
        </div>
    </div>
</div>

<script>
    // === æ ¸å¿ƒå¸¸é‡ (2025å¹´è–ªåˆ¶æœºé•¿) ===
    const FIX_NET = 96080.65;      // å›ºå®šå·¥èµ„åˆ°æ‰‹
    const FIX_GROSS = 101740.00;   // å›ºå®šå·¥èµ„ç¨å‰
    const SOCIAL = 5217.09;        // ä¸ªäººç¤¾ä¿
    const RATE_INT = 640;          // å›½é™…å°æ—¶è´¹æ ‡å‡†
    const RATE_HOLIDAY = 7262;     // ä¸‰å€å·¥èµ„æ—¥è–ª (29048/4)
    const BLOCK_FACTOR = 0.6;      // å›½é™…æ»‘è¡Œå¤©æ•°ç³»æ•°
    
    // ä¸ªç¨ç¨ç‡è¡¨
    const TAX_TABLE = [
        { l: 36000, r: 0.03, q: 0 },
        { l: 144000, r: 0.10, q: 2520 },
        { l: 300000, r: 0.20, q: 16920 },
        { l: 420000, r: 0.25, q: 31920 },
        { l: 660000, r: 0.30, q: 52920 },
        { l: 960000, r: 0.35, q: 85920 },
        { l: Infinity, r: 0.45, q: 181920 }
    ];

    // === æ•°æ®çŠ¶æ€ ===
    let logs = JSON.parse(localStorage.getItem('plogs')) || [];
    let config = JSON.parse(localStorage.getItem('pconf')) || {
        cum_income: 942692, // é»˜è®¤ä½ çš„10æœˆåº•æ•°æ®
        cum_tax: 244022,
        deduction: 0
    };

    // åˆå§‹åŒ–
    document.getElementById('set_cum_income').value = config.cum_income;
    document.getElementById('set_cum_tax').value = config.cum_tax;
    document.getElementById('set_deduction').value = config.deduction;
    document.getElementById('in_date').valueAsDate = new Date();
    renderAll();

    // === æ ¸å¿ƒç®—æ³• ===
    function calculateTax(amount) {
        for(let t of TAX_TABLE) {
            if(amount <= t.l) return amount * t.r - t.q;
        }
        return amount * 0.45 - 181920;
    }

    function renderAll() {
        const elTable = document.getElementById('bill_body');
        const elList = document.getElementById('log_list');
        elTable.innerHTML = ''; elList.innerHTML = '';
        
        let grossVar = 0;   // å˜åŠ¨å·¥èµ„ç¨å‰æ€»é¢
        let allowance = 0;  // å…ç¨è¡¥åŠ©æ€»é¢
        let htmlRows = '';

        // 1. å›ºå®šå·¥èµ„è¡Œ
        htmlRows += `
            <tr>
                <td class="row-item">å›ºå®šå·¥èµ„ (ç¨å)</td>
                <td class="row-calc">å«å›½å†…é£+ç¤¾ä¿æ‰£é™¤<br><span style="color:#059669; font-size:0.7rem">å…¬å¸å…¨é¢åŒ…ç¨</span></td>
                <td class="row-money">${FIX_NET.toLocaleString()}</td>
            </tr>
        `;

        // 2. éå†è®°å½•è®¡ç®—å˜åŠ¨è–ªèµ„
        logs.forEach((l, idx) => {
            let rowAmt = 0;
            let process = '';
            let title = '';

            // è®¡ç®—è¡¥åŠ©
            allowance += (l.meal + l.layover);

            // è®¡ç®—å˜åŠ¨å·¥èµ„
            if (l.type === 'dom') {
                // å›½å†…ï¼šå°æ—¶è´¹0ï¼Œæ»‘è¡Œ0
                title = 'å›½å†…é£è¡Œ';
                process = 'å¹´è–ªåŒ…å« (0å…ƒ)';
            } else if (l.type === 'int') {
                // å›½é™…ï¼šå°æ—¶è´¹ + æ»‘è¡Œè´¹
                title = 'å›½é™…é£è¡Œ';
                let hFee = l.amount * RATE_INT;
                let bFee = l.block * RATE_INT * BLOCK_FACTOR;
                rowAmt = hFee + bFee;
                
                let p1 = l.amount > 0 ? `<span class="tag-calc">${l.amount}h Ã— ${RATE_INT}</span>` : '';
                let p2 = l.block > 0 ? `<span class="tag-calc">${l.block}å¤© Ã— ${RATE_INT} Ã— 0.6</span>` : '';
                process = p1 + (p1&&p2?'<br>+ ':'') + p2;
            } else if (l.type === 'holiday') {
                // ä¸‰å€å·¥èµ„
                title = 'èŠ‚å‡æ—¥åŠ ç­';
                rowAmt = l.amount * RATE_HOLIDAY;
                process = `<span class="tag-calc">${l.amount}å¤© Ã— ${RATE_HOLIDAY}</span>`;
            }

            grossVar += rowAmt;

            // åªæœ‰äº§ç”Ÿå˜åŠ¨é‡‘é¢çš„æ‰æ˜¾ç¤ºåœ¨æ˜ç»†è¡¨
            if (rowAmt > 0) {
                htmlRows += `<tr><td class="row-item">${title}</td><td class="row-calc">${process}</td><td class="row-money">${rowAmt.toLocaleString()}</td></tr>`;
            }

            // æ¸²æŸ“åº•éƒ¨åˆ—è¡¨
            elList.innerHTML += `
                <div class="log-item">
                    <div>
                        <span class="badge ${l.type==='dom'?'b-dom':'b-int'}">${l.type==='holiday'?'åŠ ç­':(l.type==='dom'?'å›½å†…':'å›½é™…')}</span>
                        <span style="font-weight:bold">${l.date.slice(5)}</span>
                        <span style="font-size:0.8rem; color:#64748b; margin-left:5px;">${l.amount}${l.type==='holiday'?'å¤©':'h'}</span>
                        ${l.block>0 ? `<span style="font-size:0.7rem; background:#f1f5f9; padding:1px 4px; border-radius:3px;">æ»‘${l.block}</span>` : ''}
                    </div>
                    <div style="text-align:right">
                        <div style="font-weight:bold">Â¥${rowAmt.toLocaleString()}</div>
                        <div style="font-size:0.7rem; color:#16a34a">è¡¥: Â¥${l.meal+l.layover}</div>
                    </div>
                    <button style="margin-left:10px; color:#ef4444; background:none; border:none;" onclick="delRecord(${idx})">Ã—</button>
                </div>
            `;
        });

        // 3. è¡¥åŠ©æ€»é¢è¡Œ
        if (allowance > 0) {
            htmlRows += `
                <tr>
                    <td class="row-item" style="color:#16a34a">å…ç¨è¡¥åŠ©åˆè®¡</td>
                    <td class="row-calc">é¤è¡¥ + é©»å¤–è¡¥è´´</td>
                    <td class="row-money" style="color:#16a34a">+${allowance.toLocaleString()}</td>
                </tr>
            `;
        }

        // 4. ç¨åŠ¡æ ¸å¿ƒè®¡ç®— (ä½ çš„ç—›ç‚¹)
        const prevCumInc = parseFloat(config.cum_income);
        const prevCumTax = parseFloat(config.cum_tax);
        const deduction = parseFloat(config.deduction);

        // æœ¬æœˆæ–°å¢åº”çº³ç¨æ‰€å¾—é¢ = å›ºå®šåŸºæ•° + å˜åŠ¨åŸºæ•° - ç¤¾ä¿ - èµ·å¾ç‚¹ - ä¸“é¡¹æ‰£é™¤
        const monthTaxableBase = FIX_GROSS - SOCIAL - 5000 - deduction;
        const totalNewIncome = prevCumInc + monthTaxableBase + grossVar;
        
        // è®¡ç®—å½“å‰æ—¶åˆ»çš„æ€»ç¨é¢
        const totalTaxNeeded = calculateTax(totalNewIncome);
        // æœ¬æœˆäº§ç”Ÿçš„æ€»ç¨é¢ (åŒ…å«å…¬å¸è¦äº¤çš„å’Œä½ è¦äº¤çš„)
        const monthTotalTax = totalTaxNeeded - prevCumTax;

        // è®¡ç®—å…¬å¸æ‰¿æ‹…éƒ¨åˆ† (å‡è®¾æ²¡æœ‰å˜åŠ¨å·¥èµ„æ—¶çš„ç¨)
        const baseIncomeCum = prevCumInc + monthTaxableBase;
        const companyTaxShare = calculateTax(baseIncomeCum) - prevCumTax;

        // ä¸ªäººæ‰¿æ‹…éƒ¨åˆ† = æ€»ç¨ - å…¬å¸æ‰¿æ‹…
        let selfTax = monthTotalTax - companyTaxShare;
        if (selfTax < 0) selfTax = 0;

        // åˆ¤æ–­ç¨ç‡å’Œè¡¥ç¨
        const currentRate = totalNewIncome > 960000 ? 0.45 : (totalNewIncome > 660000 ? 0.35 : 0.30);
        let taxDesc = `æŒ‰ ${(currentRate*100).toFixed(0)}% ç¨ç‡`;
        // å¦‚æœä¸ªäººæ‰¿æ‹…çš„ç¨ > å˜åŠ¨å·¥èµ„ * å½“å‰ç¨ç‡ï¼Œè¯´æ˜å«æœ‰è¡¥ç¨
        const normalTax = grossVar * currentRate;
        const catchUpTax = selfTax - normalTax;
        
        if (catchUpTax > 1000) {
            taxDesc += `<br><span class="tax-highlight">å«è·¨æ¡£è¡¥ç¼´ Â¥${catchUpTax.toFixed(0)}</span>`;
        }

        // æ¸²æŸ“ä¸ªç¨è¡Œ
        if (selfTax > 0) {
            htmlRows += `
                <tr>
                    <td class="row-item" style="color:#dc2626">ä¸ªäººæ‰¿æ‹…ä¸ªç¨</td>
                    <td class="row-calc">${taxDesc}</td>
                    <td class="row-money" style="color:#dc2626">-${selfTax.toLocaleString(undefined, {maximumFractionDigits:0})}</td>
                </tr>
            `;
        }

        // 5. æœ€ç»ˆè®¡ç®—
        const netVar = grossVar - selfTax;
        const finalTotal = FIX_NET + allowance + netVar;

        // å¡«å……è¡¨æ ¼
        elTable.innerHTML = htmlRows;

        // å¡«å……å¤§å±æ•°æ®
        document.getElementById('disp_total_net').innerText = 'Â¥' + finalTotal.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2});
        document.getElementById('disp_var_net').innerText = 'Â¥' + netVar.toLocaleString(undefined, {maximumFractionDigits:0});
        document.getElementById('disp_allow_net').innerText = 'Â¥' + allowance.toLocaleString();
        
        const badge = document.getElementById('tax_level_badge');
        badge.innerText = `å½“å‰ç´¯è®¡ç¨ç‡ ${(currentRate*100).toFixed(0)}%`;
        badge.style.background = currentRate===0.45 ? '#fee2e2' : '#f3e8ff';
        badge.style.color = currentRate===0.45 ? '#b91c1c' : '#7e22ce';
    }

    // === äº¤äº’é€»è¾‘ ===
    function addRecord() {
        const amt = parseFloat(document.getElementById('in_amount').value) || 0;
        const blk = parseFloat(document.getElementById('in_block').value) || 0;
        
        logs.push({
            date: document.getElementById('in_date').value || new Date().toISOString().slice(0,10),
            type: document.getElementById('in_type').value,
            amount: amt,
            block: blk,
            meal: parseFloat(document.getElementById('in_meal').value) || 0,
            layover: parseFloat(document.getElementById('in_layover').value) || 0
        });
        saveAndRender();
    }

    function delRecord(idx) {
        if(confirm('åˆ é™¤æ­¤æ¡è®°å½•ï¼Ÿ')) {
            logs.splice(idx, 1);
            saveAndRender();
        }
    }

    function saveSettings() {
        config.cum_income = parseFloat(document.getElementById('set_cum_income').value);
        config.cum_tax = parseFloat(document.getElementById('set_cum_tax').value);
        config.deduction = parseFloat(document.getElementById('set_deduction').value);
        localStorage.setItem('pconf', JSON.stringify(config));
        document.getElementById('settings').style.display = 'none';
        renderAll();
    }

    function saveAndRender() {
        localStorage.setItem('plogs', JSON.stringify(logs));
        renderAll();
    }
    
    // æ¨¡æ‹ŸAIè¯†åˆ« (ä½ å¯ä»¥æ›¿æ¢ä¸ºçœŸå®çš„DeepSeekè°ƒç”¨)
    function mockAIProcess() {
        // è¿™é‡Œåªæ˜¯ä¸ºäº†æ¼”ç¤ºï¼Œå®é™…å¯ä»¥ç”¨ä¸Šé¢çš„å®Œæ•´ç‰ˆAIä»£ç 
        const txt = document.getElementById('ai_input').value;
        if(txt.includes('åŠ ç­')) {
            logs.push({date:'2025-10-01', type:'holiday', amount:4, block:0, meal:0, layover:0});
        }
        if(txt.includes('æ²ˆé˜³-ä¸œäº¬')) {
            logs.push({date:'2025-11-15', type:'int', amount:14.5, block:2, meal:180, layover:900});
        }
        alert('è¯†åˆ«æˆåŠŸï¼(æ¼”ç¤ºæ•°æ®å·²æ·»åŠ )');
        saveAndRender();
    }
</script>
</body>
</html>
